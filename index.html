<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Music Tools</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-container">
      <header class="app-header">
        <h1>Music Tools</h1>
        <nav class="tabs" role="tablist" aria-label="Music tool widgets">
          <button class="tab active" data-tab="player" role="tab" aria-selected="true">Player</button>
          <button class="tab" data-tab="metronome" role="tab" aria-selected="false">Metronome</button>
        </nav>
      </header>

      <main class="content-area">
        <section id="player" class="panel active" role="tabpanel">
          <div class="playlist-section">
            <div class="file-input-area">
              <label class="file-input-label" for="fileInput">
                <svg class="add-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                  <path d="M10 4V16M4 10H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                Add Files
              </label>
              <input id="fileInput" type="file" accept=".mp3,.wav,.mp4,.mov,audio/*,video/mp4,video/quicktime" multiple />
            </div>
            
            <div class="playlist-container">
              <ol id="playlist" class="playlist"></ol>
              <div class="playlist-empty" id="playlistEmpty">
                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                  <path d="M16 18H32M16 24H32M16 30H24" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <p>No tracks loaded</p>
                <p class="hint">Add audio files to get started</p>
              </div>
            </div>
          </div>
        </section>

        <section id="metronome" class="panel" role="tabpanel" hidden>
          <div class="metronome-content">
            <div class="bpm-display">
              <span class="bpm-value" id="bpmValue">120</span>
              <span class="bpm-label">BPM</span>
            </div>
            
            <input id="bpmSlider" type="range" min="10" max="300" step="1" value="120" class="bpm-slider" />
            
            <div class="accent-group">
              <label for="accentSelect">Accent Every</label>
              <select id="accentSelect" class="accent-select">
                <option value="0">None</option>
                <option value="2">2 beats</option>
                <option value="3">3 beats</option>
                <option value="4">4 beats</option>
                <option value="5">5 beats</option>
                <option value="6">6 beats</option>
                <option value="7">7 beats</option>
                <option value="8">8 beats</option>
              </select>
            </div>
          </div>
        </section>
      </main>

      <div class="player-controls" id="playerControls">
        <div class="waveform-area">
          <div class="time-display">
            <span id="currentTime">0:00</span>
            <span id="duration">0:00</span>
          </div>
          <div class="waveform-wrapper">
            <canvas id="waveformCanvas" aria-label="Audio waveform visualization"></canvas>
            <div id="playhead" class="playhead"></div>
            <div id="waveformProgress" class="waveform-progress">Generating waveform... <span id="progressPercent">0%</span></div>
          </div>
        </div>

        <div class="controls-row">
          <div class="speed-control">
            <label>
              <svg class="control-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M2 8L8 2L14 8M14 8L8 14L2 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span id="speedValue">1.0x</span>
            </label>
            <input id="speedSlider" type="range" min="0.1" max="2" step="0.1" value="1" />
          </div>

          <div class="transport-controls">
            <button id="playPauseBtn" class="control-btn primary" disabled aria-label="Play">
              <svg class="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 5v14l11-7z"/>
              </svg>
              <svg class="pause-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display:none;">
                <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
              </svg>
            </button>
            <button id="stopBtn" class="control-btn" disabled aria-label="Stop">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <rect x="4" y="4" width="12" height="12" rx="2"/>
              </svg>
            </button>
          </div>

          <div class="volume-control">
            <label>
              <svg id="volumeIcon" class="control-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M2 6v4h3l4 4V2L5 6H2zm11 2c0-1.1-.9-2-2-2v4c1.1 0 2-.9 2-2z" stroke="currentColor" stroke-width="1.5"/>
              </svg>
              <span id="volumeValue">100%</span>
            </label>
            <input id="volumeSlider" type="range" min="0" max="100" step="1" value="100" />
          </div>
        </div>

        <p id="playerStatus" class="player-status">Load files to start</p>
      </div>

      <div class="metronome-controls" id="metronomeControls" style="display:none;">
        <button id="metroToggleBtn" class="metro-toggle-btn">
          <svg class="start-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M8 5v14l11-7z"/>
          </svg>
          <svg class="stop-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display:none;">
            <rect x="6" y="6" width="12" height="12" rx="2"/>
          </svg>
          <span class="btn-text">Start Metronome</span>
        </button>
        <p id="metroStatus" class="metro-status">Ready</p>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
